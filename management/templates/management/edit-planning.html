{% load static %}

<link rel="stylesheet" type="text/css" href="{% static 'management/edit-planning.css' %}" />

<div class="title">
  <h1>Planification</h1>
  <p>{{ year }}</p>
  <a class="btn-back" href="{% url 'management:edit-year' year.id %}">← back</a>
</div>

<div class="container">
  <div class="year">
    <div class="info">
      <p>Séance affecter aux semaines</p>
    </div>
    {% for one_semester in year.semester_set.all %}
    <table>
      <tr>
        <th colspan="5">{{ one_semester }}</th>
      </tr>
      <tr>
        <th>Matiere</th>
        <th>Promotion</th>
        <th>Semaine</th>
        <th>Nombre de séances</th>
        <th>Professeur</th>
      </tr>
      {% for one_week in one_semester.week_set.all %} {% for one_planning in one_week.planning_set.all %}
      <tr>
        <td>{{ one_planning.sessions.subject }}</td>
        <td>{{ one_planning.sessions.promotion }}</td>
        <td>{{ one_week }}</td>
        <td>{{ one_planning.number_sessions }}</td>
        <td>{{ one_planning.sessions.teacher }}</td>
      </tr>
      {% endfor %} {% endfor %}
    </table>

    {% endfor %}
  </div>

  <br />

  <div class="padding">
    <div class="info">
      <p>Séance à affecter à une semaine</p>
    </div>
    <table>
      <tr>
        <th>Matiere</th>
        <th>Promotion</th>
        <th>Type de séance</th>
        <th>Nombre de séance</th>
        <th>Professeur</th>
        <th>Affecter</th>
      </tr>
      {% for remaining_session_id, remaining_session_data in remaining_session.items %} {% if remaining_session_data.number_sessions > 0 %}
      <tr>
        <td>{{ remaining_session_data.name_subject }}</td>
        <td>{{ remaining_session_data.promotion }}</td>
        <td>{{ remaining_session_data.type_sessions }}</td>
        <td>{{ remaining_session_data.number_sessions }}</td>
        <td>{{ remaining_session_data.teacher }}</td>
        <td><a class="btn-back" href="{% url 'management:add-planning' year.id remaining_session_id %}">+</a></td>
      </tr>
      {% endif %} {% endfor %}
    </table>
  </div>
</div>
